!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7306110d-f672-4d35-aea9-3020a6d2f90c",e._sentryDebugIdIdentifier="sentry-dbid-7306110d-f672-4d35-aea9-3020a6d2f90c")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1736],{77119:function(e,t,l){l.d(t,{Nb:function(){return s},YS:function(){return c},aD:function(){return a},tw:function(){return i},xr:function(){return r}}),l(66285),l(48603);var n=l(22319),a="$flex $justify-center $items-center $rounded-lg $w-35 $h-35 $shadow-[0_0_60px_rgba(34,_34,_34,_0.25)] $bg-white hover:$bg-grayMystic $text-black",r="$text-white",s="$rounded-[8px] $shadow-[0_0_60px_rgba(34,_34,_34,_0.25)] $bg-white $z-[2] $overflow-hidden $flex $flex-col",i="_m87f4j0 $bg-transparent hover:$bg-grayHades $px-[20px] $py-[10px] $cursor-pointer $sprinkles-text-xs $text-grayOxford $flex $gap-[10px] $items-center",c=(0,n.c)({defaultClassName:"_1rgts1f1 $absolute $top-10 $right-10 $flex $flex-col $gap-10 $transition-all",variantClassNames:{calculating:{true:"$opacity-0",false:"_1rgts1f0 $opacity-0"}},defaultVariants:{calculating:!1},compoundVariants:[]})},77169:function(e,t,l){l.d(t,{Bx:function(){return r},LI:function(){return a},PS:function(){return i},pt:function(){return s},tu:function(){return c}}),l(94176);var n=l(22319),a=(0,n.c)({defaultClassName:"_1nit3sv0 $flex $flex-col sm:$flex-row $justify-center $items-center $gap-10 $flex-1 sm:$flex-none $z-0 $border-0 sm:$border $rounded $border-grayHeather $min-w-40 $min-h-40 $transition-colors $bg-transparent hover:$bg-grayHeather/10",variantClassNames:{withLabel:{true:"$px-0 sm:$px-20"}},defaultVariants:{withLabel:!1},compoundVariants:[]}),r="$flex $gap-10",s="$flex $gap-10 $flex-col",i=(0,n.c)({defaultClassName:"_1nit3sv2 $whitespace-normal $font-normal sm:$font-semibold $sprinkles-text-2xs sm:$sprinkles-text-sm $text-grayEbony",variantClassNames:{alwaysVisible:{true:"$block",false:"$block sm:$hidden"}},defaultVariants:{alwaysVisible:!1},compoundVariants:[]}),c="$shadow-[0_0_60px_rgba(34,_34,_34,_0.25)] $rounded-md $overflow-hidden $w-300 $max-w-[100vw] $p-20 $flex $flex-col $gap-10 $bg-white"},4141:function(e,t,l){l.r(t),l.d(t,{AddToCollection:function(){return e$}});var n=l(97458),a=l(98015),r=l(99041),s=l(1187),i=l(66287),c=l(88825),o=l(50273),d=l(66497),u=l(64357),m=l(51818),h=l(71163),$=l(77169),x=l(77119);let f=e=>{let{isCollapsed:t,added:l,onClick:a,mode:r,tooltipProps:f={side:"top"},buttonClassName:p,labelClassName:g,showLabel:v=!0}=e,{t:j}=(0,h.$G)("detailCommon"),b=(0,i.a)("lg"),w=(0,c.nD)(),C=j(l?"addedToCollection":"addToCollection"),y=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.T,{children:C}),(0,n.jsx)(o.J,{as:l?m.Z:u.Z,size:"base",color:l?"blueFreepik":void 0})]}),_=(0,n.jsxs)("button",{className:t?x.tw:x.aD,onClick:a,"data-cy":"add-to-collection-thumbnail",children:[y,t&&(0,n.jsx)("span",{children:C})]});return("large"===r&&(_=(0,n.jsxs)("button",{className:null!=p?p:$.LI(),onClick:a,children:[y,v&&(0,n.jsx)("span",{className:null!=g?g:$.PS(),children:C})]})),!b||t)?_:(0,n.jsx)(s.u,{...f,trigger:_,triggerAsChild:!0,hideOnLeaveHover:!0,container:w.current,children:C})};var p=l(93611),g=l(93962),v=l.n(g);l(34167);var j=l(22319),b="_c4jkjm2 _c4jkjm0 $flex $flex-1 $flex-col $w-full $border $border-r-0 $border-grayCadet $p-10",w="$flex",C="_c4jkjm3 $overflow-y-auto $mb-20",y=(0,j.c)({defaultClassName:"_c4jkjm5 _c4jkjm4 $relative $w-full $flex $justify-between $items-center $pr-15 $border-b-xs $border-grayCadet/50 $font-semibold",variantClassNames:{active:{true:"$text-blueFreepik",false:"$text-grayOxford"}},defaultVariants:{active:!1},compoundVariants:[]}),_=l(52983);let k=(0,_.createContext)({}),N=()=>(0,_.useContext)(k);var S=l(12289),D=l(93432);let E=()=>{let e=Array.from({length:5},(e,t)=>t);return(0,n.jsx)("div",{className:"$mb-20 $overflow-y-auto",children:e.map(e=>(0,n.jsx)("div",{className:y(),children:(0,n.jsx)(D.O.Rect,{className:"$h-20"})},e))})},I=()=>{let{t:e}=(0,h.$G)("common");return(0,n.jsx)("div",{className:C,children:(0,n.jsx)("p",{children:e("noCollectionsAvailable")})})};var L=l(7616),T=l(17989);let G=e=>{var t;return{id:e.id,name:e.name,author:(null===(t=e.author)||void 0===t?void 0:t.name)||void 0,hasResourceInCollection:e.hasResourceInCollection}};var Z=l(48294),M=l(83598);let H=e=>{let{collections:t,isSelected:l,onSelect:a}=e,{t:r}=(0,h.$G)("common");return t&&0!==t.length?(0,n.jsx)("div",{className:C,children:t.map(e=>{let t=e.id&&(null==l?void 0:l.includes(e.id))||!1;return(0,n.jsxs)("button",{className:y({active:t}),onClick:()=>{a(e)},children:[(0,n.jsx)("span",{children:e.name}),t&&(0,n.jsx)(o.J,{as:Z.Z}),(0,n.jsxs)("span",{className:"_c4jkjm8 $absolute $right-15 $text-grayHeather $sprinkles-text-sm $flex $items-center $gap-10 $bg-white $opacity-0",children:[t?r("remove"):r("select"),(0,n.jsx)(o.J,{as:t?M.Z:Z.Z})]})]},e.id)})}):(0,n.jsx)(I,{})},P=e=>{let{userCollectionsResult:t}=e,l=(0,L.b9)(T.HQ),a=(0,L.Dv)(T.GD),{data:r}=t,s=r.filter(e=>"owned"===e.ownership),{handleCollectionSelection:i,collectionsSelected:c}=N();return(0,_.useEffect)(()=>{""===a&&l(t)},[a,l,t]),(0,n.jsx)(H,{collections:s.map(G),onSelect:i,isSelected:c.map(e=>e.id)})},O=e=>{let{id:t}=e,l=(0,S.l)({page:1,resourceId:t});return l.isError?(0,n.jsx)(I,{}):l.isPending?(0,n.jsx)(E,{}):l.isSuccess?(0,n.jsx)(P,{userCollectionsResult:l.data}):(0,n.jsx)(E,{})},V=e=>{let{onCreate:t}=e,[l,a]=(0,_.useState)(""),{t:r}=(0,h.$G)("detailCommon");return(0,n.jsxs)("div",{className:w,children:[(0,n.jsx)("input",{type:"text",className:b,placeholder:r("createNewCollection"),value:l,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(t(l),a(""))}}),(0,n.jsx)(p.f5,{color:"blue",radius:"none",onClick:()=>{t(l),a("")},children:(0,n.jsx)("span",{className:"$leading-tight",children:r("addCollection")})})]})};var B=l(52404),R=l(34606);let A=()=>{let{openToast:e}=(0,B.x_)(),{t}=(0,h.$G)("collections"),l=(0,S.g)();return{handleCreate:(0,_.useCallback)(async n=>{0!==n.length&&((await (0,R.B)({name:n,description:"",type:"private"})).success?e({type:"success",message:t("collectionCreatedSuccessfully")}):e(),l())},[l,e,t])}},J=()=>{let{data:e,meta:{pagination:{nextPage:t}}}=(0,L.Dv)(T.HQ);return{collections:e,nextPage:t}};var z=l(94669),F=l(92521);let Q=e=>{let{placeholder:t,onSearch:l}=e;return(0,n.jsxs)("div",{className:(0,F.m)("$mb-20",w),children:[(0,n.jsx)("input",{type:"text",className:b,placeholder:t,onChange:e=>{l(e.target.value)}}),(0,n.jsx)(p.f5,{color:"blue",radius:"none",children:(0,n.jsx)(o.J,{as:z.Z})})]})},q=e=>{let{type:t,id:l,preview:a}=e,{t:r}=(0,h.$G)(["detailCommon","common"]),{collections:s}=J(),{isDirty:i,handleSaveChanges:c,handleSearch:o,isSearchByApi:d}=N(),{handleCreate:u}=A(),m=s.length>=8||d;return(0,n.jsxs)("div",{className:"$flex $bg-white",children:[(0,n.jsx)("div",{className:"$relative $hidden md:$flex $justify-center $items-center $w-300",children:"icon"!==t?(0,n.jsx)(v(),{src:a,className:"$object-cover",alt:"preview",fill:!0}):(0,n.jsx)(v(),{src:a,alt:"preview",width:128,height:128})}),(0,n.jsxs)("div",{className:"_c4jkjm1 _c4jkjm0 $flex $flex-1 $flex-col $justify-between $p-25 $pt-30 $leading-relaxed $text-grayOxford",children:[(0,n.jsx)("p",{className:"$sprinkles-text-xl $font-semibold $mb-15",children:r("detailCommon:addToCollection")}),(0,n.jsxs)("div",{className:"_c4jkjm0 $flex $flex-1 $flex-col",children:[m&&(0,n.jsx)(Q,{placeholder:r("common:search"),onSearch:o}),(0,n.jsx)(O,{id:l,preview:a,type:t})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(V,{onCreate:u}),(0,n.jsx)(p.gg,{color:"blue",radius:"xs",block:!0,onClick:c,disabled:!i,className:"$mt-20",children:r("detailCommon:saveChanges")})]})]})]})};var K=l(49658);let U=()=>(0,_.useCallback)(e=>{let{collectionId:t,collectionName:l,fileId:n,location:a}=e;(0,K.sendGTMEvent)({collection_id:t,collection_name:l,event_name:"add_to_collection",event:"ga4event",file_id:n,location:a})},[]);var X=l(86686);let Y=async e=>{let{id:t,collectionId:l,resourceType:n}=e;return await (0,X.c)("/api/user/resources/".concat(t,"/collections"),"DELETE",{collectionId:l,resourceType:n})},W=async e=>{let{id:t,collectionId:l,resourceType:n}=e;return await (0,X.c)("/api/user/resources/".concat(t,"/collections"),"POST",{collectionId:l,resourceType:n})};var ee=l(41843),et=l(12297),el=l(24399),en=l(73139);let ea=(0,el.cn)([]),er=(0,en.xu)(e=>{let{id:t,type:l}=e;return(0,el.cn)(e=>!!e(ee.PQ)&&e(ea).some(e=>e.id===t&&e.type===l),(e,n,a)=>{n(ea,e=>a?e.filter(e=>e.id!==t):[...e,{id:t,type:l}])})},et.vZ),es=e=>{let{type:t,id:l,location:n}=e,[a,r]=(0,_.useState)([]),[s,i]=(0,_.useState)([]),[c,o]=(0,_.useState)([]),{collections:d}=J(),u=(0,L.b9)(er({type:t,id:l})),m=(0,S.g)(),{openToast:$}=(0,B.x_)(),{t:x}=(0,h.$G)("collections"),f=U(),p=(0,_.useMemo)(()=>(null==d?void 0:d.length)>0?d.filter(e=>e.hasResourceInCollection).map(G):[],[d]);(0,_.useEffect)(()=>{(null==d?void 0:d.length)>0&&o(p)},[d,p]);let g=a.length>0||s.length>0,v=(0,_.useCallback)(async()=>{if(0===a.length&&0===s.length)return;let e=[];a.length>0&&e.push(W({id:l,collectionId:a.map(e=>e.id),resourceType:t})),s.length>0&&e.push(Y({id:l,collectionId:s.map(e=>e.id),resourceType:t}));try{(await Promise.all(e)).every(e=>null==e?void 0:e.success)?(a.forEach(e=>{f({fileId:l,collectionId:e.id,collectionName:e.name,location:n})}),r([]),i([]),$({type:"success",message:x("changesSavedSuccessfully")}),u((null==c?void 0:c.length)===0)):$(),m()}catch(e){$()}},[null==c?void 0:c.length,a,s,l,n,m,f,u,$,x,t]),j=e=>{let{array:t,collection:l}=e;return t.map(e=>e.id).includes(l.id)?t.filter(e=>e.id!==l.id):[...t,l]},b=(0,_.useCallback)(async e=>{o(t=>j({array:t,collection:e}))},[]);return{isDirty:g,collectionsSelected:c,handleCollectionSelection:(0,_.useCallback)(async e=>{b(e),d.some(t=>t.id===e.id&&t.hasResourceInCollection)?i(t=>j({array:t,collection:e})):r(t=>j({array:t,collection:e}))},[d,b]),handleSaveChanges:v}},ei=()=>{let{collections:e,nextPage:t}=J(),[l,n]=(0,_.useState)([]),a=(0,L.b9)(T.GD),r=(0,_.useRef)();(0,_.useEffect)(()=>{(null==e?void 0:e.length)>0&&n(e.map(G))},[e,t]);let s=null!==t,i=t=>{n((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))).map(G))},c=async e=>{r.current&&clearTimeout(r.current),r.current=setTimeout(async()=>{a(e)},350)};return{isSearchByApi:s,searchCollections:l,handleSearch:e=>{s?c(e):i(e)}}},ec=e=>{let{children:t,id:l,type:a,location:r}=e,{collectionsSelected:s,handleCollectionSelection:i,handleSaveChanges:c,isDirty:o}=es({type:a,id:l,location:r}),{searchCollections:d,isSearchByApi:u,handleSearch:m}=ei(),h=(0,_.useMemo)(()=>({collectionsSelected:s,searchCollections:d,isSearchByApi:u,isDirty:o,handleCollectionSelection:i,handleSearch:m,handleSaveChanges:c}),[s,i,c,m,o,u,d]);return(0,n.jsx)(k.Provider,{value:h,children:t})};var eo=l(96005),ed=l(42011),eu=l(34529);let em=()=>(0,_.useCallback)(e=>{let{location:t,fileId:l}=e;(0,K.sendGTMEvent)({event:"ga4event",event_name:"collect",location:t,file_id:l})},[]),eh=e=>{let{id:t,type:l,location:n}=e,{t:a}=(0,h.$G)("error"),r=(0,L.Dv)(er({id:t,type:l})),s=(0,eu.oC)(T.GD),[i,c]=(0,_.useState)(!1),o=(0,ed.d)(),{loginUrl:d,setLoginCookies:u}=(0,eo.J)(),{openToast:m}=(0,B.x_)(),$=(0,S.g)(),x=em();return{added:r,showModal:i,setShowModal:c,onClick:()=>{if(!o){u(),window.location.href=d;return}$(),c(!0),x({location:n,fileId:t})},handleError:e=>{console.error(e),m({type:"danger",message:a("unknown")}),c(!1)},handleOpenChange:()=>{s(),c(!1)}}},e$=e=>{let{type:t,id:l,preview:s,mode:i,location:c,tooltipProps:o,buttonClassName:d,labelClassName:u,showLabel:m=!0,renderTrigger:h}=e,{added:$,onClick:x,showModal:p,handleOpenChange:g}=eh({id:l,type:t,location:c}),v=(0,r.U)().isCollapsed;return(0,n.jsxs)(n.Fragment,{children:[h?h({isAdded:$,onClick:x}):(0,n.jsx)(f,{isCollapsed:v,onClick:x,added:$,mode:null!=i?i:"normal",tooltipProps:o,buttonClassName:d,showLabel:m,labelClassName:u}),(0,n.jsx)(a.u,{open:p,onOpenChange:g,thumbnail:!0,children:(0,n.jsx)(ec,{id:l,type:t,location:c,children:(0,n.jsx)(q,{type:t,id:l,preview:s})})})]})}},43122:function(e,t,l){l.d(t,{B:function(){return x}});var n=l(97458),a=l(1187),r=l(66287),s=l(88825),i=l(97374),c=l(50273),o=l(66497),d=l(94182),u=l(71163),m=l(48493),h=l(97922),$=l(8276);let x=e=>{let{id:t,name:l,type:x,buttonClassName:f,labelClassName:p,preview:{width:g,height:v,url:j},inThumbnail:b=!1,showLabel:w=!1,tooltipProps:C={},trigger:y}=e,{t:_}=(0,u.$G)("detailCommon"),k=(0,$.z)(j,g,v),N=(0,h.Zk)(),S=(0,s.nD)(),D=(0,r.a)("lgMax"),E=(0,m.fD)({event_name:b?"similar_images_thumbnail":"similar_images",file_id:t.toString(),file_name:l,content_group2:x,search_logic_applied:"similar_images"}),I=_("viewSimilar"),L=async e=>{e.preventDefault(),e.stopPropagation(),E(),N(),await k(x)};if(y)return(0,n.jsx)(i.fC,{onClick:L,children:y});let T=(0,n.jsxs)("button",{"data-cy":"view-similar-button",className:f,onClick:L,children:[(0,n.jsx)(o.T,{children:I}),(0,n.jsx)(c.J,{as:d.Z,size:"base"}),w&&(0,n.jsx)("span",{className:p,children:I})]});return D||w?T:(0,n.jsx)(a.u,{...C,trigger:T,triggerAsChild:!0,hideOnLeaveHover:!0,container:S.current,children:I})}},34606:function(e,t,l){l.d(t,{B:function(){return a}});var n=l(86686);let a=e=>{let{name:t,description:l,type:a}=e;return(0,n.c)("/api/user/collections","POST",{name:t,...l&&{description:l},...a&&{type:a}})}},12289:function(e,t,l){l.d(t,{g:function(){return d},l:function(){return o}});var n=l(78511),a=l(25288),r=l(7616),s=l(52983),i=l(70831),c=l(17989);let o=e=>{let{page:t=1,resourceId:l}=e,a=(0,r.Dv)(c.GD);return(0,n.a)({queryKey:[...u,{page:t,resourceId:l,searchTerm:a}],queryFn:async()=>{let{data:e,success:n}=await (0,i.X)({page:t,resourceId:l,searchTerm:a});if(!n)throw Error(e);return e}})},d=()=>{let e=(0,a.NL)();return(0,s.useCallback)(()=>{e.invalidateQueries({queryKey:u})},[e])},u=["collections","all"]},99041:function(e,t,l){l.d(t,{T:function(){return s},U:function(){return i}});var n=l(97458),a=l(52983);let r=(0,a.createContext)({isCollapsed:null}),s=e=>{let{isCollapsed:t,children:l}=e,s=(0,a.useMemo)(()=>({isCollapsed:t}),[t]);return(0,n.jsx)(r.Provider,{value:s,children:l})},i=()=>(0,a.useContext)(r)},64357:function(e,t,l){var n=l(97458);t.Z=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,n.jsx)("path",{d:"M462.998 325.742c0-75.526-59.998-149.797-148.419-149.797-38.906 0-75.989 13.503-104.409 39.715a153 153 0 0 0-3.17 3.009 155 155 0 0 0-3.17-3.009c-28.42-26.212-65.503-39.715-104.409-39.715-88.421 0-148.419 74.271-148.419 149.797 0 40.557 15.467 78.684 44.143 107.36l-.002-.002L161.01 599.011c12.276 12.28 28.6 19.043 45.964 19.044h.005l.022-.001.022.001h.005c17.364-.001 33.688-6.765 45.964-19.044l165.867-165.912-.002.002c28.674-28.675 44.141-66.803 44.141-107.359M383.5 397.746l-.002.002L217.63 563.66a14.9 14.9 0 0 1-10.607 4.395h-.001l-.022-.001-.022.001h-.001a14.9 14.9 0 0 1-10.607-4.395L30.503 397.749l-.002-.002C11.337 378.583 1.002 353.104 1.002 326c0-54.451 44.665-100.246 100.747-100.246 24.43 0 48.756 9.003 68.184 26.66 15.735 14.301 17.818 30.356 37.068 30.356s21.333-16.055 37.068-30.356c19.427-17.658 43.753-26.66 68.184-26.66C368.335 225.754 413 271.549 413 326c-.001 27.104-10.337 52.583-29.5 71.746"})})},51818:function(e,t,l){var n=l(97458);t.Z=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,n.jsx)("path",{d:"M512 184.7c0-75.5-60-149.8-148.4-149.8-38.9 0-76 13.5-104.4 39.7-1.1 1-2.1 2-3.2 3-1-1-2.1-2-3.2-3-28.4-26.2-65.5-39.7-104.4-39.7C60 34.9 0 109.2 0 184.7c0 40.6 15.5 78.7 44.1 107.4L210 458c12.3 12.3 28.6 19 46 19s33.7-6.8 46-19l165.9-165.9c28.6-28.7 44.1-66.8 44.1-107.4"})})},94182:function(e,t,l){var n=l(97458);t.Z=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Capa 1",viewBox:"0 0 23.99 24.38",width:16,height:16,"aria-hidden":!0,...e,children:[(0,n.jsx)("path",{d:"M22.82 14.89c-.65 0-1.17.52-1.17 1.17v4.33c0 .9-.74 1.64-1.64 1.64H3.98c-.44 0-.85-.17-1.16-.48s-.48-.72-.48-1.16l.02-16.03c0-.9.74-1.64 1.64-1.64h4.21c.65 0 1.17-.52 1.17-1.17S8.86.38 8.21.38H4C1.8.38.02 2.16.02 4.36L0 20.39c0 1.07.41 2.07 1.17 2.82.75.75 1.75 1.17 2.82 1.17h16.02c2.2 0 3.98-1.79 3.98-3.98v-4.33c0-.65-.52-1.17-1.17-1.17Z"}),(0,n.jsx)("path",{d:"M5.03 19.16c-.45 0-.7-.5-.4-.82l3.38-3.69c.22-.24.63-.23.83.03l1.66 2.1 3.6-3.93c.31-.34.88-.32 1.16.04l4.09 5.17c.36.46.01 1.11-.6 1.11H5.03ZM23.67 10.84l-2.1-2.1c1.63-2.46 1.07-5.81-1.32-7.61a5.61 5.61 0 0 0-7.88 1.14 5.55 5.55 0 0 0-1.06 4.17c.21 1.48.99 2.8 2.2 3.7a5.68 5.68 0 0 0 6.47.19l2.1 2.1c.22.21.5.32.79.32s.58-.11.8-.32c.43-.44.43-1.15 0-1.59m-3.04-5.19c0 2.06-1.68 3.74-3.74 3.74a3.74 3.74 0 0 1 0-7.48c2.06 0 3.74 1.68 3.74 3.74"})]})}}]);